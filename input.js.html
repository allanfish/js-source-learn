<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>input.js - Fis3 Code</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>input.js - Fis3 Code</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L4">bullseye</a></li>
<li><a href="#L8">calendar</a></li>
<li><a href="#L10">classes</a></li>
<li><a href="#L6">clone</a></li>
<li><a href="#L3">crossvent</a></li>
<li><a href="#L7">defaults</a></li>
<li><a href="#L9">momentum</a></li>
<li><a href="#L5">throttle</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L86">containerMouseDown.unignore</a></li>
<li><a href="#L12">inputCalendar</a></li>
<li><a href="#L76">inputCalendar.containerClick</a></li>
<li><a href="#L82">inputCalendar.containerMouseDown</a></li>
<li><a href="#L50">inputCalendar.destroy</a></li>
<li><a href="#L56">inputCalendar.eventListening</a></li>
<li><a href="#L27">inputCalendar.init</a></li>
<li><a href="#L91">inputCalendar.invalidateInput</a></li>
<li><a href="#L117">inputCalendar.isEmpty</a></li>
<li><a href="#L97">inputCalendar.show</a></li>
<li><a href="#L104">inputCalendar.takeInput</a></li>
<li><a href="#L121">inputCalendar.unrequire</a></li>
<li><a href="#L113">inputCalendar.updateInput</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Constant">'<a href="rome.js.html#L17" title="rome.js:17">use</a> strict'</span>;<br/></li>
<li><br/></li>
<li><a id="L3">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">crossvent</span> = require<span class="javaScriptParens">(</span><span class="Constant">'<span class="linkable">crossvent</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L4">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">bullseye</span> = require<span class="javaScriptParens">(</span><span class="Constant">'<span class="linkable">bullseye</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L5">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">throttle</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">throttle</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L6">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">clone</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">clone</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L7">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">defaults</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">defaults</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L8">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">calendar</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">calendar</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L9">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">momentum</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">momentum</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L10">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">classes</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">classes</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li><a id="L12">&#x200c;</a><span class="Identifier">function</span> <span class="linkable">inputCalendar</span> <span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, calendarOptions<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; <span class="Identifier">var</span> o = calendarOptions || <span class="Identifier">{}</span>;<br/></li>
<li><br/></li>
<li>&nbsp; o.associated = <a href="core.js.html#L4" title="core.js:4">input</a>;<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Identifier">var</span> api = <a href="calendar.js.html#L15" title="calendar.js:15">calendar</a><span class="javaScriptParens">(</span>o<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> throttledTakeInput = <a href="#L5" title="input.js:5">throttle</a><span class="javaScriptParens">(</span>takeInput, <span class="javaScriptValue">30</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> ignoreInvalidation;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> ignoreShow;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> eye;<br/></li>
<li><br/></li>
<li>&nbsp; init<span class="javaScriptParens">(</span>o<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Statement">return</span> api;<br/></li>
<li><br/></li>
<li><a id="L27">&#x200c;</a>&nbsp; <span class="Identifier">function</span> init <span class="javaScriptParens">(</span>initOptions<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; o = <a href="calendar.js.html#L9" title="calendar.js:9">defaults</a><span class="javaScriptParens">(</span>initOptions || o, api<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L11" title="calendar.js:11">classes</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>api.container, o.styles.positioned<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>api.container, <span class="Constant">'mousedown'</span>, containerMouseDown<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>api.container, <span class="Constant">'click'</span>, containerClick<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; api.getDate = unrequire<span class="javaScriptParens">(</span>api.getDate<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.getDateString = unrequire<span class="javaScriptParens">(</span>api.getDateString<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.getMoment = unrequire<span class="javaScriptParens">(</span>api.getMoment<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.initialValue<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <a href="core.js.html#L4" title="core.js:4">input</a>.value = o.initialValue.format<span class="javaScriptParens">(</span>o.inputFormat<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; eye = <a href="#L4" title="input.js:4">bullseye</a><span class="javaScriptParens">(</span>api.container, <a href="core.js.html#L4" title="core.js:4">input</a><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.on<span class="javaScriptParens">(</span><span class="Constant">'data'</span>, updateInput<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.on<span class="javaScriptParens">(</span><span class="Constant">'show'</span>, eye.refresh<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; eventListening<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; throttledTakeInput<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L50">&#x200c;</a>&nbsp; <span class="Identifier">function</span> destroy <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; eventListening<span class="javaScriptParens">(</span><span class="Constant">true</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; eye.destroy<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; eye = <span class="Statement">null</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L56">&#x200c;</a>&nbsp; <span class="Identifier">function</span> eventListening <span class="javaScriptParens">(</span><a href="association.js.html#L22" title="association.js:22">remove</a><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> op = <a href="association.js.html#L22" title="association.js:22">remove</a> ? <span class="Constant">'<a href="association.js.html#L22" title="association.js:22">remove</a>'</span> : <span class="Constant">'<a href="association.js.html#L38" title="association.js:38">add</a>'</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'click'</span>, show<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'touchend'</span>, show<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'focusin'</span>, show<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'change'</span>, throttledTakeInput<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'keypress'</span>, throttledTakeInput<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'keydown'</span>, throttledTakeInput<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'<a href="core.js.html#L4" title="core.js:4">input</a>'</span>, throttledTakeInput<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.invalidate<span class="javaScriptParens">)</span> <span class="Identifier">{</span> <a href="calendar.js.html#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><a href="core.js.html#L4" title="core.js:4">input</a>, <span class="Constant">'blur'</span>, invalidateInput<span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span><a href="association.js.html#L22" title="association.js:22">remove</a><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; api.once<span class="javaScriptParens">(</span><span class="Constant">'ready'</span>, init<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; api.off<span class="javaScriptParens">(</span><span class="Constant">'destroyed'</span>, destroy<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span> <span class="Statement">else</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; api.off<span class="javaScriptParens">(</span><span class="Constant">'ready'</span>, init<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; api.once<span class="javaScriptParens">(</span><span class="Constant">'destroyed'</span>, destroy<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L76">&#x200c;</a>&nbsp; <span class="Identifier">function</span> containerClick <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; ignoreShow = <span class="Constant">true</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="core.js.html#L4" title="core.js:4">input</a>.focus<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; ignoreShow = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L82">&#x200c;</a>&nbsp; <span class="Identifier">function</span> containerMouseDown <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; ignoreInvalidation = <span class="Constant">true</span>;<br/></li>
<li>&nbsp; &nbsp; setTimeout<span class="javaScriptParens">(</span>unignore, <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li><a id="L86">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> unignore <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; ignoreInvalidation = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L91">&#x200c;</a>&nbsp; <span class="Identifier">function</span> invalidateInput <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!ignoreInvalidation &amp;&amp; !isEmpty<span class="javaScriptParens">())</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; api.emitValues<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L97">&#x200c;</a>&nbsp; <span class="Identifier">function</span> show <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>ignoreShow<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; api.show<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L104">&#x200c;</a>&nbsp; <span class="Identifier">function</span> takeInput <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> value = <a href="core.js.html#L4" title="core.js:4">input</a>.value.<a href="classes.js.html#L3" title="classes.js:3">trim</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>isEmpty<span class="javaScriptParens">())</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> date = <a href="calendar.js.html#L10" title="calendar.js:10">momentum</a>.<a href="rome.moment.js.html#L3" title="rome.moment.js:3">moment</a><span class="javaScriptParens">(</span>value, o.inputFormat, o.strictParse<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.setValue<span class="javaScriptParens">(</span>date<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L113">&#x200c;</a>&nbsp; <span class="Identifier">function</span> updateInput <span class="javaScriptParens">(</span>data<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <a href="core.js.html#L4" title="core.js:4">input</a>.value = data;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L117">&#x200c;</a>&nbsp; <span class="Identifier">function</span> isEmpty <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> o.required === <span class="Constant">false</span> &amp;&amp; <a href="core.js.html#L4" title="core.js:4">input</a>.value.<a href="classes.js.html#L3" title="classes.js:3">trim</a><span class="javaScriptParens">()</span> === <span class="Constant">''</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L121">&#x200c;</a>&nbsp; <span class="Identifier">function</span> unrequire <span class="javaScriptParens">(</span>fn<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Identifier">function</span> maybe <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> isEmpty<span class="javaScriptParens">()</span> ? <span class="Statement">null</span> : fn.apply<span class="javaScriptParens">(</span><span class="Identifier">this</span>, <span class="Identifier">arguments</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a href="throttle.js.html#L3" title="throttle.js:3">module.exports</a> = <a href="#L12" title="input.js:12">inputCalendar</a>;<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
