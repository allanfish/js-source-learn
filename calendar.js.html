<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>calendar.js - Fis3 Code</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>calendar.js - Fis3 Code</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L11">classes</a></li>
<li><a href="#L8">clone</a></li>
<li><a href="#L3">crossvent</a></li>
<li><a href="#L9">defaults</a></li>
<li><a href="#L5">dom</a></li>
<li><a href="#L4">emitter</a></li>
<li><a href="#L10">momentum</a></li>
<li><a href="#L13">no</a></li>
<li><a href="#L12">noop</a></li>
<li><a href="#L7">parse</a></li>
<li><a href="#L6">text</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L15">calendar</a></li>
<li><a href="#L316">calendar.addMonth</a></li>
<li><a href="#L288">calendar.calendarEventTarget</a></li>
<li><a href="#L317">calendar.changeMonth</a></li>
<li><a href="#L134">calendar.changeOptions</a></li>
<li><a href="#L94">calendar.destroy</a></li>
<li><a href="#L227">calendar.displayValidTimesOnly</a></li>
<li><a href="#L412">calendar.emitValues</a></li>
<li><a href="#L128">calendar.eventListening</a></li>
<li><a href="#L654">calendar.getDate</a></li>
<li><a href="#L658">calendar.getDateString</a></li>
<li><a href="#L662">calendar.getMoment</a></li>
<li><a href="#L620">calendar.getMonthOffset</a></li>
<li><a href="#L272">calendar.hide</a></li>
<li><a href="#L257">calendar.hideCalendar</a></li>
<li><a href="#L278">calendar.hideConditionally</a></li>
<li><a href="#L301">calendar.hideOnBlur</a></li>
<li><a href="#L308">calendar.hideOnClick</a></li>
<li><a href="#L255">calendar.hideTimeList</a></li>
<li><a href="#L546">calendar.inRange</a></li>
<li><a href="#L562">calendar.inTimeRange</a></li>
<li><a href="#L51">calendar.init</a></li>
<li><a href="#L392">calendar.isDisplayed</a></li>
<li><a href="#L525">calendar.isInRange</a></li>
<li><a href="#L536">calendar.isInRangeLeft</a></li>
<li><a href="#L541">calendar.isInRangeRight</a></li>
<li><a href="#L49">calendar.napi</a></li>
<li><a href="#L589">calendar.pickDay</a></li>
<li><a href="#L637">calendar.pickTime</a></li>
<li><a href="#L90">calendar.ready</a></li>
<li><a href="#L421">calendar.refresh</a></li>
<li><a href="#L441">calendar.removeChildren</a></li>
<li><a href="#L147">calendar.render</a></li>
<li><a href="#L450">calendar.renderAllDays</a></li>
<li><a href="#L157">calendar.renderDates</a></li>
<li><a href="#L457">calendar.renderDays</a></li>
<li><a href="#L201">calendar.renderTime</a></li>
<li><a href="#L143">calendar.resetOptions</a></li>
<li><a href="#L401">calendar.sameCalendarMonth</a></li>
<li><a href="#L610">calendar.selectDayElement</a></li>
<li><a href="#L632">calendar.setTime</a></li>
<li><a href="#L429">calendar.setValue</a></li>
<li><a href="#L264">calendar.show</a></li>
<li><a href="#L256">calendar.showCalendar</a></li>
<li><a href="#L254">calendar.showTimeList</a></li>
<li><a href="#L315">calendar.subtractMonth</a></li>
<li><a href="#L245">calendar.toggleTimeList</a></li>
<li><a href="#L329">calendar.update</a></li>
<li><a href="#L336">calendar.updateCalendar</a></li>
<li><a href="#L361">calendar.updateCalendarSelection</a></li>
<li><a href="#L405">calendar.updateTime</a></li>
<li><a href="#L577">calendar.validateTowards</a></li>
<li><a href="#L218">calendar.weekday</a></li>
<li><a href="#L395">isDisplayed.matches</a></li>
<li><a href="#L174">renderDates.renderMonth</a></li>
<li><a href="#L519">renderDays.hiddenWhen</a></li>
<li><a href="#L495">renderDays.part</a></li>
<li><a href="#L514">renderDays.validationTest</a></li>
<li><a href="#L354">updateCalendar.updateMonth</a></li>
<li><a href="#L382">updateCalendarSelection.aggregate</a></li>
<li><a href="#L373">updateCalendarSelection.cast</a></li>
<li><a href="#L386">updateCalendarSelection.inside</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Constant">'<a href="rome.js.html#L17" title="rome.js:17">use</a> strict'</span>;<br/></li>
<li><br/></li>
<li><a id="L3">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">crossvent</span> = require<span class="javaScriptParens">(</span><span class="Constant">'<span class="linkable">crossvent</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L4">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">emitter</span> = require<span class="javaScriptParens">(</span><span class="Constant">'contra/<span class="linkable">emitter</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L5">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">dom</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">dom</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L6">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">text</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">text</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L7">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">parse</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">parse</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L8">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">clone</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">clone</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L9">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">defaults</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">defaults</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L10">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">momentum</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">momentum</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L11">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">classes</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">classes</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L12">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">noop</span> = require<span class="javaScriptParens">(</span><span class="Constant">'./<span class="linkable">noop</span>'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><a id="L13">&#x200c;</a><span class="Identifier">var</span> <span class="linkable">no</span>;<br/></li>
<li><br/></li>
<li><a id="L15">&#x200c;</a><span class="Identifier">function</span> <span class="linkable">calendar</span> <span class="javaScriptParens">(</span>calendarOptions<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; <span class="Identifier">var</span> o;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> ref;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> refCal;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> container;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> rendered = <span class="Constant">false</span>;<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Comment">// date variables<br/></li>
<li></span>&nbsp; <span class="Identifier">var</span> monthOffsetAttribute = <span class="Constant">'data-<a href="rome.moment.js.html#L4" title="rome.moment.js:4">rome</a>-offset'</span>;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> weekdays;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> weekdayCount;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> calendarMonths = <span class="Identifier">[]</span>;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> lastYear;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> lastMonth;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> lastDay;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> lastDayElement;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> datewrapper;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> back;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> next;<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Comment">// time variables<br/></li>
<li></span>&nbsp; <span class="Identifier">var</span> secondsInDay = <span class="javaScriptValue">60</span> * <span class="javaScriptValue">60</span> * <span class="javaScriptValue">24</span>;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> time;<br/></li>
<li>&nbsp; <span class="Identifier">var</span> timelist;<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Identifier">var</span> api = <a href="#L4" title="calendar.js:4">emitter</a><span class="javaScriptParens">(</span><span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; associated: calendarOptions.associated<br/></li>
<li>&nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; init<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; setTimeout<span class="javaScriptParens">(</span>ready, <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Statement">return</span> api;<br/></li>
<li><br/></li>
<li><a id="L49">&#x200c;</a>&nbsp; <span class="Identifier">function</span> napi <span class="javaScriptParens">()</span> <span class="Identifier">{</span> <span class="Statement">return</span> api; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L51">&#x200c;</a>&nbsp; <span class="Identifier">function</span> init <span class="javaScriptParens">(</span>initOptions<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; o = <a href="#L9" title="calendar.js:9">defaults</a><span class="javaScriptParens">(</span>initOptions || calendarOptions, api<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!container<span class="javaScriptParens">)</span> <span class="Identifier">{</span> container = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.container <span class="Identifier">}</span><span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; weekdays = o.weekdayFormat;<br/></li>
<li>&nbsp; &nbsp; weekdayCount = weekdays.length;<br/></li>
<li>&nbsp; &nbsp; lastMonth = <a href="#L13" title="calendar.js:13">no</a>;<br/></li>
<li>&nbsp; &nbsp; lastYear = <a href="#L13" title="calendar.js:13">no</a>;<br/></li>
<li>&nbsp; &nbsp; lastDay = <a href="#L13" title="calendar.js:13">no</a>;<br/></li>
<li>&nbsp; &nbsp; lastDayElement = <a href="#L13" title="calendar.js:13">no</a>;<br/></li>
<li>&nbsp; &nbsp; o.appendTo.appendChild<span class="javaScriptParens">(</span>container<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; removeChildren<span class="javaScriptParens">(</span>container<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; rendered = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; ref = o.initialValue ? o.initialValue : <a href="#L10" title="calendar.js:10">momentum</a>.<a href="rome.moment.js.html#L3" title="rome.moment.js:3">moment</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; refCal = ref.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; api.back = subtractMonth;<br/></li>
<li>&nbsp; &nbsp; api.container = container;<br/></li>
<li>&nbsp; &nbsp; api.destroyed = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; api.destroy = destroy.bind<span class="javaScriptParens">(</span>api, <span class="Constant">false</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.emitValues = emitValues;<br/></li>
<li>&nbsp; &nbsp; api.getDate = getDate;<br/></li>
<li>&nbsp; &nbsp; api.getDateString = getDateString;<br/></li>
<li>&nbsp; &nbsp; api.getMoment = getMoment;<br/></li>
<li>&nbsp; &nbsp; api.hide = hide;<br/></li>
<li>&nbsp; &nbsp; api.next = addMonth;<br/></li>
<li>&nbsp; &nbsp; api.options = changeOptions;<br/></li>
<li>&nbsp; &nbsp; api.options.reset = resetOptions;<br/></li>
<li>&nbsp; &nbsp; api.refresh = refresh;<br/></li>
<li>&nbsp; &nbsp; api.restore = napi;<br/></li>
<li>&nbsp; &nbsp; api.setValue = setValue;<br/></li>
<li>&nbsp; &nbsp; api.show = show;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; eventListening<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; ready<span class="javaScriptParens">()</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L90">&#x200c;</a>&nbsp; <span class="Identifier">function</span> ready <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'ready'</span>, <a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">(</span>o<span class="javaScriptParens">))</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L94">&#x200c;</a>&nbsp; <span class="Identifier">function</span> destroy <span class="javaScriptParens">(</span>silent<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>container &amp;&amp; container.parentNode<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; container.parentNode.removeChild<span class="javaScriptParens">(</span>container<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; eventListening<span class="javaScriptParens">(</span><span class="Constant">true</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> destroyed = api.emitterSnapshot<span class="javaScriptParens">(</span><span class="Constant">'destroyed'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; api.back = <a href="#L12" title="calendar.js:12">noop</a>;<br/></li>
<li>&nbsp; &nbsp; api.destroyed = <span class="Constant">true</span>;<br/></li>
<li>&nbsp; &nbsp; api.destroy = napi;<br/></li>
<li>&nbsp; &nbsp; api.emitValues = napi;<br/></li>
<li>&nbsp; &nbsp; api.getDate = <a href="#L12" title="calendar.js:12">noop</a>;<br/></li>
<li>&nbsp; &nbsp; api.getDateString = <a href="#L12" title="calendar.js:12">noop</a>;<br/></li>
<li>&nbsp; &nbsp; api.getMoment = <a href="#L12" title="calendar.js:12">noop</a>;<br/></li>
<li>&nbsp; &nbsp; api.hide = napi;<br/></li>
<li>&nbsp; &nbsp; api.next = <a href="#L12" title="calendar.js:12">noop</a>;<br/></li>
<li>&nbsp; &nbsp; api.options = napi;<br/></li>
<li>&nbsp; &nbsp; api.options.reset = napi;<br/></li>
<li>&nbsp; &nbsp; api.refresh = napi;<br/></li>
<li>&nbsp; &nbsp; api.restore = init;<br/></li>
<li>&nbsp; &nbsp; api.setValue = napi;<br/></li>
<li>&nbsp; &nbsp; api.show = napi;<br/></li>
<li>&nbsp; &nbsp; api.off<span class="javaScriptParens">()</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>silent !== <span class="Constant">true</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; destroyed<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L128">&#x200c;</a>&nbsp; <span class="Identifier">function</span> eventListening <span class="javaScriptParens">(</span><a href="association.js.html#L22" title="association.js:22">remove</a><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> op = <a href="association.js.html#L22" title="association.js:22">remove</a> ? <span class="Constant">'<a href="association.js.html#L22" title="association.js:22">remove</a>'</span> : <span class="Constant">'<a href="association.js.html#L38" title="association.js:38">add</a>'</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.autoHideOnBlur<span class="javaScriptParens">)</span> <span class="Identifier">{</span> <a href="#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><span class="Statement">document</span>.documentElement, <span class="Constant">'focus'</span>, hideOnBlur, <span class="Constant">true</span><span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.autoHideOnClick<span class="javaScriptParens">)</span> <span class="Identifier">{</span> <a href="#L3" title="calendar.js:3">crossvent</a><span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><span class="Statement">document</span>, <span class="Constant">'click'</span>, hideOnClick<span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L134">&#x200c;</a>&nbsp; <span class="Identifier">function</span> changeOptions <span class="javaScriptParens">(</span>options<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span><span class="Identifier">arguments</span>.length === <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">(</span>o<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; destroy<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; init<span class="javaScriptParens">(</span>options<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L143">&#x200c;</a>&nbsp; <span class="Identifier">function</span> resetOptions <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> changeOptions<span class="javaScriptParens">(</span><span class="Identifier">{</span> appendTo: o.appendTo <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L147">&#x200c;</a>&nbsp; <span class="Identifier">function</span> render <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>rendered<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; rendered = <span class="Constant">true</span>;<br/></li>
<li>&nbsp; &nbsp; renderDates<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; renderTime<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'render'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L157">&#x200c;</a>&nbsp; <span class="Identifier">function</span> renderDates <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!o.date<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> i;<br/></li>
<li>&nbsp; &nbsp; calendarMonths = <span class="Identifier">[]</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; datewrapper = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.date, <span class="Statement">parent</span>: container <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>i = <span class="javaScriptValue">0</span>; i &lt; o.monthsInCalendar; i++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; renderMonth<span class="javaScriptParens">(</span>i<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <a href="#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>back, <span class="Constant">'click'</span>, subtractMonth<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>next, <span class="Constant">'click'</span>, addMonth<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>datewrapper, <span class="Constant">'click'</span>, pickDay<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li><a id="L174">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> renderMonth <span class="javaScriptParens">(</span>i<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> month = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.month, <span class="Statement">parent</span>: datewrapper <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>i === <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; back = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'button'</span>, className: o.styles.back, attributes: <span class="Identifier">{</span> type: <span class="Constant">'button'</span> <span class="Identifier">}</span>, <span class="Statement">parent</span>: month <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>i === o.monthsInCalendar <span class="javaScriptValue">-1</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; next = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'button'</span>, className: o.styles.next, attributes: <span class="Identifier">{</span> type: <span class="Constant">'button'</span> <span class="Identifier">}</span>, <span class="Statement">parent</span>: month <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> label = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.monthLabel, <span class="Statement">parent</span>: month <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> date = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'table'</span>, className: o.styles.dayTable, <span class="Statement">parent</span>: month <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> datehead = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'thead'</span>, className: o.styles.dayHead, <span class="Statement">parent</span>: date <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> dateheadrow = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'tr'</span>, className: o.styles.dayRow, <span class="Statement">parent</span>: datehead <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> datebody = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'tbody'</span>, className: o.styles.dayBody, <span class="Statement">parent</span>: date <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> j;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>j = <span class="javaScriptValue">0</span>; j &lt; weekdayCount; j++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'th'</span>, className: o.styles.dayHeadElem, <span class="Statement">parent</span>: dateheadrow, <a href="#L6" title="calendar.js:6">text</a>: weekdays<span class="Identifier">[</span>weekday<span class="javaScriptParens">(</span>j<span class="javaScriptParens">)</span><span class="Identifier">]</span> <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; datebody.setAttribute<span class="javaScriptParens">(</span>monthOffsetAttribute, i<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; calendarMonths.push<span class="javaScriptParens">(</span><span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; label: label,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; body: datebody<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L201">&#x200c;</a>&nbsp; <span class="Identifier">function</span> renderTime <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!o.time || !o.timeInterval<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> timewrapper = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.time, <span class="Statement">parent</span>: container <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; time = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.selectedTime, <span class="Statement">parent</span>: timewrapper, <a href="#L6" title="calendar.js:6">text</a>: ref.format<span class="javaScriptParens">(</span>o.timeFormat<span class="javaScriptParens">)</span> <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>time, <span class="Constant">'click'</span>, toggleTimeList<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; timelist = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.timeList, <span class="Statement">parent</span>: timewrapper <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L3" title="calendar.js:3">crossvent</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>timelist, <span class="Constant">'click'</span>, pickTime<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> next = <a href="#L10" title="calendar.js:10">momentum</a>.<a href="rome.moment.js.html#L3" title="rome.moment.js:3">moment</a><span class="javaScriptParens">(</span><span class="Constant">'00:00:00'</span>, <span class="Constant">'HH:mm:ss'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> latest = next.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span><span class="javaScriptValue">1</span>, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> <span class="javaScriptParens">(</span>next.isBefore<span class="javaScriptParens">(</span>latest<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> className: o.styles.timeOption, <span class="Statement">parent</span>: timelist, <a href="#L6" title="calendar.js:6">text</a>: next.format<span class="javaScriptParens">(</span>o.timeFormat<span class="javaScriptParens">)</span> <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; next.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>o.timeInterval, <span class="Constant">'seconds'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L218">&#x200c;</a>&nbsp; <span class="Identifier">function</span> weekday <span class="javaScriptParens">(</span><a href="core.js.html#L3" title="core.js:3">index</a>, backwards<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> factor = backwards ? <span class="javaScriptValue">-1</span> : <span class="javaScriptValue">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> offset = <a href="core.js.html#L3" title="core.js:3">index</a> + o.weekStart * factor;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>offset &gt;= weekdayCount || offset &lt; <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; offset += weekdayCount * -factor;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> offset;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L227">&#x200c;</a>&nbsp; <span class="Identifier">function</span> displayValidTimesOnly <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!o.time || !rendered<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> times = timelist.children;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> length = times.length;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> date;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> time;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> item;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> i;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>i = <span class="javaScriptValue">0</span>; i &lt; length; i++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; item = times<span class="Identifier">[</span>i<span class="Identifier">]</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; time = <a href="#L10" title="calendar.js:10">momentum</a>.<a href="rome.moment.js.html#L3" title="rome.moment.js:3">moment</a><span class="javaScriptParens">(</span><a href="#L6" title="calendar.js:6">text</a><span class="javaScriptParens">(</span>item<span class="javaScriptParens">)</span>, o.timeFormat<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; date = setTime<span class="javaScriptParens">(</span>ref.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>, time<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; item.style.display = isInRange<span class="javaScriptParens">(</span>date, <span class="Constant">false</span>, o.timeValidator<span class="javaScriptParens">)</span> ? <span class="Constant">'block'</span> : <span class="Constant">'none'</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L245">&#x200c;</a>&nbsp; <span class="Identifier">function</span> toggleTimeList <span class="javaScriptParens">(</span>show<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> display = <span class="Statement">typeof</span> show === <span class="Constant">'boolean'</span> ? show : timelist.style.display === <span class="Constant">'none'</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>display<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; showTimeList<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span> <span class="Statement">else</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; hideTimeList<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L254">&#x200c;</a>&nbsp; <span class="Identifier">function</span> showTimeList <span class="javaScriptParens">()</span> <span class="Identifier">{</span> <span class="Statement">if</span> <span class="javaScriptParens">(</span>timelist<span class="javaScriptParens">)</span> <span class="Identifier">{</span> timelist.style.display = <span class="Constant">'block'</span>; <span class="Identifier">}</span> <span class="Identifier">}<br/></li>
<li><a id="L255">&#x200c;</a></span>&nbsp; <span class="Identifier">function</span> hideTimeList <span class="javaScriptParens">()</span> <span class="Identifier">{</span> <span class="Statement">if</span> <span class="javaScriptParens">(</span>timelist<span class="javaScriptParens">)</span> <span class="Identifier">{</span> timelist.style.display = <span class="Constant">'none'</span>; <span class="Identifier">}</span> <span class="Identifier">}<br/></li>
<li><a id="L256">&#x200c;</a></span>&nbsp; <span class="Identifier">function</span> showCalendar <span class="javaScriptParens">()</span> <span class="Identifier">{</span> container.style.display = <span class="Constant">'<a href="core.js.html#L5" title="core.js:5">inline</a>-block'</span>; api.emit<span class="javaScriptParens">(</span><span class="Constant">'show'</span><span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li><a id="L257">&#x200c;</a></span>&nbsp; <span class="Identifier">function</span> hideCalendar <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>container.style.display !== <span class="Constant">'none'</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; container.style.display = <span class="Constant">'none'</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'hide'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L264">&#x200c;</a>&nbsp; <span class="Identifier">function</span> show <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; render<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; refresh<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; toggleTimeList<span class="javaScriptParens">(</span>!o.date<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; showCalendar<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L272">&#x200c;</a>&nbsp; <span class="Identifier">function</span> hide <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; hideTimeList<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; setTimeout<span class="javaScriptParens">(</span>hideCalendar, <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L278">&#x200c;</a>&nbsp; <span class="Identifier">function</span> hideConditionally <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; hideTimeList<span class="javaScriptParens">()</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> pos = <a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>container, o.styles.positioned<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>pos<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; setTimeout<span class="javaScriptParens">(</span>hideCalendar, <span class="javaScriptValue">0</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L288">&#x200c;</a>&nbsp; <span class="Identifier">function</span> calendarEventTarget <span class="javaScriptParens">(</span>e<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> target = e.target;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>target === api.associated<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">true</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">while</span> <span class="javaScriptParens">(</span>target<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>target === container<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">true</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; target = target.parentNode;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L301">&#x200c;</a>&nbsp; <span class="Identifier">function</span> hideOnBlur <span class="javaScriptParens">(</span>e<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>calendarEventTarget<span class="javaScriptParens">(</span>e<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; hideConditionally<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L308">&#x200c;</a>&nbsp; <span class="Identifier">function</span> hideOnClick <span class="javaScriptParens">(</span>e<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>calendarEventTarget<span class="javaScriptParens">(</span>e<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; hideConditionally<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L315">&#x200c;</a>&nbsp; <span class="Identifier">function</span> subtractMonth <span class="javaScriptParens">()</span> <span class="Identifier">{</span> changeMonth<span class="javaScriptParens">(</span><span class="Constant">'subtract'</span><span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li><a id="L316">&#x200c;</a></span>&nbsp; <span class="Identifier">function</span> addMonth <span class="javaScriptParens">()</span> <span class="Identifier">{</span> changeMonth<span class="javaScriptParens">(</span><span class="Constant">'<a href="association.js.html#L38" title="association.js:38">add</a>'</span><span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li><a id="L317">&#x200c;</a></span>&nbsp; <span class="Identifier">function</span> changeMonth <span class="javaScriptParens">(</span>op<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> bound;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> direction = op === <span class="Constant">'<a href="association.js.html#L38" title="association.js:38">add</a>'</span> ? <span class="javaScriptValue">-1</span> : <span class="javaScriptValue">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> offset = o.monthsInCalendar + direction * getMonthOffset<span class="javaScriptParens">(</span>lastDayElement<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; refCal<span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span>offset, <span class="Constant">'months'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; bound = inRange<span class="javaScriptParens">(</span>refCal.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; ref = bound || ref;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>bound<span class="javaScriptParens">)</span> <span class="Identifier">{</span> refCal = bound.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; update<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span>op === <span class="Constant">'<a href="association.js.html#L38" title="association.js:38">add</a>'</span> ? <span class="Constant">'next'</span> : <span class="Constant">'back'</span>, ref.month<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L329">&#x200c;</a>&nbsp; <span class="Identifier">function</span> update <span class="javaScriptParens">(</span>silent<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; updateCalendar<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; updateTime<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>silent !== <span class="Constant">true</span><span class="javaScriptParens">)</span> <span class="Identifier">{</span> emitValues<span class="javaScriptParens">()</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; displayValidTimesOnly<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L336">&#x200c;</a>&nbsp; <span class="Identifier">function</span> updateCalendar <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!o.date || !rendered<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> y = refCal.year<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> m = refCal.month<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> d = refCal.date<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>d === lastDay &amp;&amp; m === lastMonth &amp;&amp; y === lastYear<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> canStay = isDisplayed<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; lastDay = refCal.date<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; lastMonth = refCal.month<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; lastYear = refCal.year<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>canStay<span class="javaScriptParens">)</span> <span class="Identifier">{</span> updateCalendarSelection<span class="javaScriptParens">()</span>; <span class="Statement">return</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; calendarMonths.forEach<span class="javaScriptParens">(</span>updateMonth<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; renderAllDays<span class="javaScriptParens">()</span>;<br/></li>
<li><br/></li>
<li><a id="L354">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> updateMonth <span class="javaScriptParens">(</span>month, i<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> offsetCal = refCal.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>i, <span class="Constant">'months'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L6" title="calendar.js:6">text</a><span class="javaScriptParens">(</span>month.label, offsetCal.format<span class="javaScriptParens">(</span>o.monthFormat<span class="javaScriptParens">))</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; removeChildren<span class="javaScriptParens">(</span>month.body<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L361">&#x200c;</a>&nbsp; <span class="Identifier">function</span> updateCalendarSelection <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> day = refCal.date<span class="javaScriptParens">()</span> - <span class="javaScriptValue">1</span>;<br/></li>
<li>&nbsp; &nbsp; selectDayElement<span class="javaScriptParens">(</span><span class="Constant">false</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; calendarMonths.forEach<span class="javaScriptParens">(</span><span class="Identifier">function</span> <span class="javaScriptParens">(</span>cal<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> days;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>sameCalendarMonth<span class="javaScriptParens">(</span>cal.date, refCal<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; days = cast<span class="javaScriptParens">(</span>cal.body.children<span class="javaScriptParens">)</span>.map<span class="javaScriptParens">(</span>aggregate<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; days = <span class="Type">Array</span>.prototype.concat.apply<span class="javaScriptParens">(</span><span class="Identifier">[]</span>, days<span class="javaScriptParens">)</span>.filter<span class="javaScriptParens">(</span>inside<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; selectDayElement<span class="javaScriptParens">(</span>days<span class="Identifier">[</span>day<span class="Identifier">]</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li><a id="L373">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> cast <span class="javaScriptParens">(</span>like<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> dest = <span class="Identifier">[]</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>i = <span class="javaScriptValue">0</span>; i &lt; like.length; i++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; dest.push<span class="javaScriptParens">(</span>like<span class="Identifier">[</span>i<span class="Identifier">]</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> dest;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L382">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> aggregate <span class="javaScriptParens">(</span>child<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> cast<span class="javaScriptParens">(</span>child.children<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L386">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> inside <span class="javaScriptParens">(</span>child<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> !<a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>child, o.styles.dayPrevMonth<span class="javaScriptParens">)</span> &amp;&amp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; !<a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>child, o.styles.dayNextMonth<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L392">&#x200c;</a>&nbsp; <span class="Identifier">function</span> isDisplayed <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> calendarMonths.some<span class="javaScriptParens">(</span>matches<span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li><a id="L395">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> matches <span class="javaScriptParens">(</span>cal<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!lastYear<span class="javaScriptParens">)</span> <span class="Identifier">{</span> <span class="Statement">return</span> <span class="Constant">false</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> sameCalendarMonth<span class="javaScriptParens">(</span>cal.date, refCal<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L401">&#x200c;</a>&nbsp; <span class="Identifier">function</span> sameCalendarMonth <span class="javaScriptParens">(</span>left, right<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> left &amp;&amp; right &amp;&amp; left.year<span class="javaScriptParens">()</span> === right.year<span class="javaScriptParens">()</span> &amp;&amp; left.month<span class="javaScriptParens">()</span> === right.month<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L405">&#x200c;</a>&nbsp; <span class="Identifier">function</span> updateTime <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!o.time || !rendered<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <a href="#L6" title="calendar.js:6">text</a><span class="javaScriptParens">(</span>time, ref.format<span class="javaScriptParens">(</span>o.timeFormat<span class="javaScriptParens">))</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L412">&#x200c;</a>&nbsp; <span class="Identifier">function</span> emitValues <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'data'</span>, getDateString<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'year'</span>, ref.year<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'month'</span>, ref.month<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'day'</span>, ref.day<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; api.emit<span class="javaScriptParens">(</span><span class="Constant">'time'</span>, ref.format<span class="javaScriptParens">(</span>o.timeFormat<span class="javaScriptParens">))</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L421">&#x200c;</a>&nbsp; <span class="Identifier">function</span> refresh <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; lastYear = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; lastMonth = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; lastDay = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; update<span class="javaScriptParens">(</span><span class="Constant">true</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L429">&#x200c;</a>&nbsp; <span class="Identifier">function</span> setValue <span class="javaScriptParens">(</span>value<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> date = <a href="#L7" title="calendar.js:7">parse</a><span class="javaScriptParens">(</span>value, o.inputFormat<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>date === <span class="Statement">null</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; ref = inRange<span class="javaScriptParens">(</span>date<span class="javaScriptParens">)</span> || ref;<br/></li>
<li>&nbsp; &nbsp; refCal = ref.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; update<span class="javaScriptParens">(</span><span class="Constant">true</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> api;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L441">&#x200c;</a>&nbsp; <span class="Identifier">function</span> removeChildren <span class="javaScriptParens">(</span>elem, <span class="Statement">self</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">while</span> <span class="javaScriptParens">(</span>elem &amp;&amp; elem.firstChild<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; elem.removeChild<span class="javaScriptParens">(</span>elem.firstChild<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span><span class="Statement">self</span> === <span class="Constant">true</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; elem.parentNode.removeChild<span class="javaScriptParens">(</span>elem<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L450">&#x200c;</a>&nbsp; <span class="Identifier">function</span> renderAllDays <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> i;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>i = <span class="javaScriptValue">0</span>; i &lt; o.monthsInCalendar; i++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; renderDays<span class="javaScriptParens">(</span>i<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L457">&#x200c;</a>&nbsp; <span class="Identifier">function</span> renderDays <span class="javaScriptParens">(</span>offset<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> month = calendarMonths<span class="Identifier">[</span>offset<span class="Identifier">]</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> offsetCal = refCal.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>offset, <span class="Constant">'months'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> total = offsetCal.daysInMonth<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> current = offsetCal.month<span class="javaScriptParens">()</span> !== ref.month<span class="javaScriptParens">()</span> ? <span class="javaScriptValue">-1</span> : ref.date<span class="javaScriptParens">()</span>; <span class="Comment">// -1 : 1..31<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> first = offsetCal.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.date<span class="javaScriptParens">(</span><span class="javaScriptValue">1</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> firstDay = weekday<span class="javaScriptParens">(</span>first.day<span class="javaScriptParens">()</span>, <span class="Constant">true</span><span class="javaScriptParens">)</span>; <span class="Comment">// 0..6<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> tr = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'tr'</span>, className: o.styles.dayRow, <span class="Statement">parent</span>: month.body <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> prevMonth = hiddenWhen<span class="javaScriptParens">(</span>offset !== <span class="javaScriptValue">0</span>, <span class="Identifier">[</span>o.styles.dayBodyElem, o.styles.dayPrevMonth<span class="Identifier">]</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> nextMonth = hiddenWhen<span class="javaScriptParens">(</span>offset !== o.monthsInCalendar - <span class="javaScriptValue">1</span>, <span class="Identifier">[</span>o.styles.dayBodyElem, o.styles.dayNextMonth<span class="Identifier">]</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> disabled = o.styles.dayDisabled;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> lastDay;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; part<span class="javaScriptParens">(</span><span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; base: first.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.subtract<span class="javaScriptParens">(</span>firstDay, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; length: firstDay,<br/></li>
<li>&nbsp; &nbsp; &nbsp; cell: prevMonth<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; part<span class="javaScriptParens">(</span><span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; base: first.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; length: total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; cell: <span class="Identifier">[</span>o.styles.dayBodyElem<span class="Identifier">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; selectable: <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; lastDay = first.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>total, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; part<span class="javaScriptParens">(</span><span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; base: lastDay,<br/></li>
<li>&nbsp; &nbsp; &nbsp; length: weekdayCount - tr.children.length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; cell: nextMonth<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; back.disabled = !isInRangeLeft<span class="javaScriptParens">(</span>first, <span class="Constant">true</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; next.disabled = !isInRangeRight<span class="javaScriptParens">(</span>lastDay, <span class="Constant">true</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; month.date = offsetCal.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li><br/></li>
<li><a id="L495">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> part <span class="javaScriptParens">(</span>data<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">var</span> i, day, node;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>i = <span class="javaScriptValue">0</span>; i &lt; data.length; i++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>tr.children.length === weekdayCount<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tr = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{</span> type: <span class="Constant">'tr'</span>, className: o.styles.dayRow, <span class="Statement">parent</span>: month.body <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; day = data.base.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>i, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; node = <a href="#L5" title="calendar.js:5">dom</a><span class="javaScriptParens">(</span><span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: <span class="Constant">'td'</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">parent</span>: tr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L6" title="calendar.js:6">text</a>: day.format<span class="javaScriptParens">(</span>o.dayFormat<span class="javaScriptParens">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className: validationTest<span class="javaScriptParens">(</span>day, data.cell.join<span class="javaScriptParens">(</span><span class="Constant">' '</span><span class="javaScriptParens">)</span>.split<span class="javaScriptParens">(</span><span class="Constant">' '</span><span class="javaScriptParens">))</span>.join<span class="javaScriptParens">(</span><span class="Constant">' '</span><span class="javaScriptParens">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">}</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>data.selectable &amp;&amp; day.date<span class="javaScriptParens">()</span> === current<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selectDayElement<span class="javaScriptParens">(</span>node<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L514">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> validationTest <span class="javaScriptParens">(</span>day, cell<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!isInRange<span class="javaScriptParens">(</span>day, <span class="Constant">true</span>, o.dateValidator<span class="javaScriptParens">))</span> <span class="Identifier">{</span> cell.push<span class="javaScriptParens">(</span>disabled<span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> cell;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L519">&#x200c;</a>&nbsp; &nbsp; <span class="Identifier">function</span> hiddenWhen <span class="javaScriptParens">(</span>value, cell<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>value<span class="javaScriptParens">)</span> <span class="Identifier">{</span> cell.push<span class="javaScriptParens">(</span>o.styles.dayConcealed<span class="javaScriptParens">)</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> cell;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L525">&#x200c;</a>&nbsp; <span class="Identifier">function</span> isInRange <span class="javaScriptParens">(</span>date, allday, validator<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!isInRangeLeft<span class="javaScriptParens">(</span>date, allday<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!isInRangeRight<span class="javaScriptParens">(</span>date, allday<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> valid = <span class="javaScriptParens">(</span>validator || <span class="Type">Function</span>.prototype<span class="javaScriptParens">)</span>.call<span class="javaScriptParens">(</span>api, date.toDate<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> valid !== <span class="Constant">false</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L536">&#x200c;</a>&nbsp; <span class="Identifier">function</span> isInRangeLeft <span class="javaScriptParens">(</span>date, allday<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> min = !o.min ? <span class="Constant">false</span> : <span class="javaScriptParens">(</span>allday ? o.min.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.startOf<span class="javaScriptParens">(</span><span class="Constant">'day'</span><span class="javaScriptParens">)</span> : o.min<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> !min || !date.isBefore<span class="javaScriptParens">(</span>min<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L541">&#x200c;</a>&nbsp; <span class="Identifier">function</span> isInRangeRight <span class="javaScriptParens">(</span>date, allday<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> max = !o.max ? <span class="Constant">false</span> : <span class="javaScriptParens">(</span>allday ? o.max.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.endOf<span class="javaScriptParens">(</span><span class="Constant">'day'</span><span class="javaScriptParens">)</span> : o.max<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> !max || !date.isAfter<span class="javaScriptParens">(</span>max<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L546">&#x200c;</a>&nbsp; <span class="Identifier">function</span> inRange <span class="javaScriptParens">(</span>date<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.min &amp;&amp; date.isBefore<span class="javaScriptParens">(</span>o.min<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> inRange<span class="javaScriptParens">(</span>o.min.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span> <span class="Statement">else</span> <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.max &amp;&amp; date.isAfter<span class="javaScriptParens">(</span>o.max<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> inRange<span class="javaScriptParens">(</span>o.max.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> value = date.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.subtract<span class="javaScriptParens">(</span><span class="javaScriptValue">1</span>, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>validateTowards<span class="javaScriptParens">(</span>value, date, <span class="Constant">'<a href="association.js.html#L38" title="association.js:38">add</a>'</span><span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> inTimeRange<span class="javaScriptParens">(</span>value<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; value = date.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>validateTowards<span class="javaScriptParens">(</span>value, date, <span class="Constant">'subtract'</span><span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> inTimeRange<span class="javaScriptParens">(</span>value<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L562">&#x200c;</a>&nbsp; <span class="Identifier">function</span> inTimeRange <span class="javaScriptParens">(</span>value<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> copy = value.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>.subtract<span class="javaScriptParens">(</span>o.timeInterval, <span class="Constant">'seconds'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> times = Math.ceil<span class="javaScriptParens">(</span>secondsInDay / o.timeInterval<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> i;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> <span class="javaScriptParens">(</span>i = <span class="javaScriptValue">0</span>; i &lt; times; i++<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; copy.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>o.timeInterval, <span class="Constant">'seconds'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>copy.date<span class="javaScriptParens">()</span> &gt; value.date<span class="javaScriptParens">())</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; copy.subtract<span class="javaScriptParens">(</span><span class="javaScriptValue">1</span>, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.timeValidator.call<span class="javaScriptParens">(</span>api, copy.toDate<span class="javaScriptParens">())</span> !== <span class="Constant">false</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> copy;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L577">&#x200c;</a>&nbsp; <span class="Identifier">function</span> validateTowards <span class="javaScriptParens">(</span>value, date, op<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> valid = <span class="Constant">false</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> <span class="javaScriptParens">(</span>valid === <span class="Constant">false</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; value<span class="Identifier">[</span>op<span class="Identifier">]</span><span class="javaScriptParens">(</span><span class="javaScriptValue">1</span>, <span class="Constant">'days'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>value.month<span class="javaScriptParens">()</span> !== date.month<span class="javaScriptParens">())</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; valid = o.dateValidator.call<span class="javaScriptParens">(</span>api, value.toDate<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> valid !== <span class="Constant">false</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L589">&#x200c;</a>&nbsp; <span class="Identifier">function</span> pickDay <span class="javaScriptParens">(</span>e<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> target = e.target;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span><a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>target, o.styles.dayDisabled<span class="javaScriptParens">)</span> || !<a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>target, o.styles.dayBodyElem<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> day = parseInt<span class="javaScriptParens">(</span><a href="#L6" title="calendar.js:6">text</a><span class="javaScriptParens">(</span>target<span class="javaScriptParens">)</span>, <span class="javaScriptValue">10</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> prev = <a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>target, o.styles.dayPrevMonth<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> next = <a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>target, o.styles.dayNextMonth<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">var</span> offset = getMonthOffset<span class="javaScriptParens">(</span>target<span class="javaScriptParens">)</span> - getMonthOffset<span class="javaScriptParens">(</span>lastDayElement<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; ref.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>offset, <span class="Constant">'months'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>prev || next<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; ref.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>prev ? <span class="javaScriptValue">-1</span> : <span class="javaScriptValue">1</span>, <span class="Constant">'months'</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; selectDayElement<span class="javaScriptParens">(</span>target<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; ref.date<span class="javaScriptParens">(</span>day<span class="javaScriptParens">)</span>; <span class="Comment">// must run after setting the month<br/></li>
<li></span>&nbsp; &nbsp; setTime<span class="javaScriptParens">(</span>ref, inRange<span class="javaScriptParens">(</span>ref<span class="javaScriptParens">)</span> || ref<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; refCal = ref.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>o.autoClose === <span class="Constant">true</span><span class="javaScriptParens">)</span> <span class="Identifier">{</span> hideConditionally<span class="javaScriptParens">()</span>; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; update<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L610">&#x200c;</a>&nbsp; <span class="Identifier">function</span> selectDayElement <span class="javaScriptParens">(</span>node<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>lastDayElement<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <a href="#L11" title="calendar.js:11">classes</a>.<a href="association.js.html#L22" title="association.js:22">remove</a><span class="javaScriptParens">(</span>lastDayElement, o.styles.selectedDay<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>node<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <a href="#L11" title="calendar.js:11">classes</a>.<a href="association.js.html#L38" title="association.js:38">add</a><span class="javaScriptParens">(</span>node, o.styles.selectedDay<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; lastDayElement = node;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L620">&#x200c;</a>&nbsp; <span class="Identifier">function</span> getMonthOffset <span class="javaScriptParens">(</span>elem<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> offset;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> <span class="javaScriptParens">(</span>elem &amp;&amp; elem.getAttribute<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; offset = elem.getAttribute<span class="javaScriptParens">(</span>monthOffsetAttribute<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span><span class="Statement">typeof</span> offset === <span class="Constant">'string'</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> parseInt<span class="javaScriptParens">(</span>offset, <span class="javaScriptValue">10</span><span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; elem = elem.parentNode;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> <span class="javaScriptValue">0</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L632">&#x200c;</a>&nbsp; <span class="Identifier">function</span> setTime <span class="javaScriptParens">(</span>to, from<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; to.hour<span class="javaScriptParens">(</span>from.hour<span class="javaScriptParens">())</span>.minute<span class="javaScriptParens">(</span>from.minute<span class="javaScriptParens">())</span>.second<span class="javaScriptParens">(</span>from.second<span class="javaScriptParens">())</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> to;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L637">&#x200c;</a>&nbsp; <span class="Identifier">function</span> pickTime <span class="javaScriptParens">(</span>e<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> target = e.target;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">(</span>!<a href="#L11" title="calendar.js:11">classes</a>.<a href="classes.js.html#L30" title="classes.js:30">contains</a><span class="javaScriptParens">(</span>target, o.styles.timeOption<span class="javaScriptParens">))</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Identifier">var</span> value = <a href="#L10" title="calendar.js:10">momentum</a>.<a href="rome.moment.js.html#L3" title="rome.moment.js:3">moment</a><span class="javaScriptParens">(</span><a href="#L6" title="calendar.js:6">text</a><span class="javaScriptParens">(</span>target<span class="javaScriptParens">)</span>, o.timeFormat<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; setTime<span class="javaScriptParens">(</span>ref, value<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; &nbsp; refCal = ref.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; emitValues<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; updateTime<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> <span class="javaScriptParens">((</span>!o.date &amp;&amp; o.autoClose === <span class="Constant">true</span><span class="javaScriptParens">)</span> || o.autoClose === <span class="Constant">'time'</span><span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; hideConditionally<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}</span> <span class="Statement">else</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; hideTimeList<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">}<br/></li>
<li></span>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L654">&#x200c;</a>&nbsp; <span class="Identifier">function</span> getDate <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> ref.toDate<span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L658">&#x200c;</a>&nbsp; <span class="Identifier">function</span> getDateString <span class="javaScriptParens">(</span>format<span class="javaScriptParens">)</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> ref.format<span class="javaScriptParens">(</span>format || o.inputFormat<span class="javaScriptParens">)</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a id="L662">&#x200c;</a>&nbsp; <span class="Identifier">function</span> getMoment <span class="javaScriptParens">()</span> <span class="Identifier">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> ref.<a href="#L8" title="calendar.js:8">clone</a><span class="javaScriptParens">()</span>;<br/></li>
<li>&nbsp; <span class="Identifier">}<br/></li>
<li></span><span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><a href="throttle.js.html#L3" title="throttle.js:3">module.exports</a> = <a href="#L15" title="calendar.js:15">calendar</a>;<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
